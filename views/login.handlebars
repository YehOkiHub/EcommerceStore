<div class="section"> 
    <div class="container">
      <div class="panel">
        <div class="panelHeader"><h2>Login Account</h2></div>
        <div class="panelBody">

            <form id="form" class="form1">
            <input id="username" type="text" placeholder="Username">
            <input id="password" type="password" placeholder="Password">            
            <button class="button button-grey" type="submit">Login</button>
            </form>
            <a href="/register" class="link">Sign Up</a>

        </div>
        
            

      </div>    
    </div>


</div>

<script> 
    async function login() {
        let username = document.getElementById("username").value
        let password = document.getElementById("password").value
        let response = await fetch("http://localhost:3001/api/users/login", {
            method: "POST",
            body: JSON.stringify({
                username: username,
                password: password
            }),headers: {
                "Content-Type": "application/json"
            }

        })

         let data = await response.json()
         alert(data.message)  
         if(data.message == "You are now logged in!"){
            window.location.href="/dashboard"
         }  
    }
let form = document.getElementById("form")
form.addEventListener("submit", function(){
    event.preventDefault()
    login();
})
</script>